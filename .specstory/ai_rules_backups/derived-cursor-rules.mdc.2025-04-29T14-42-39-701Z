
## AI Coding Assistant Rules

## HEADERS

- Project Setup Assistance (2025-04-05 14:31:59)
- Domain Review (@investments and @accounts) (2025-04-29 11:05:11)


## TECH STACK

- Python 3.8
- FastAPI
- Uvicorn
- SQLAlchemy
- psycopg2-binary
- Pydantic
- Pydantic-Settings
- Python-Dotenv
- Passlib[bcrypt]
- Python-Jose[cryptography]
- Email-Validator
- Python-Multipart


## PROJECT DOCUMENTATION & CONTEXT SYSTEM

- README.md
- phase3-completion-summary.md
- phase3-planning.md
- phase4-implementation.md
- postman-import-guide.md
- postman-environment.json
- study/sqlalchemy-models-guide.md
- api-routing.md
- database-connection-guide.md
- aws-cli-commands.md
- cloudwatch-alarms.md
- database-config.md
- domain-drive.md
- elastic-beanstalk.md
- environment-variables.md
- infra-setup.md
- vpc-design.md
- api.md
- application-deployment-guide.md
- troubleshooting.md
- guides/database-access-with-dbeaver.md
- guides/deploying-and-seeding-production-db.md
- decisions/001-nat-gateway-omission.md
- decisions/002-iam-permissions-model.md
- decisions/003-rds-configuration-choices.md
- decisions/004-elastic-beanstalk-deployment.md
- study/09-virtual-environments.md
- study/04-ebextensions.md
- study/02-application-packaging.md
- study/10-linting-in-python.md
- study/01-elastic-beanstalk.md
- study/05-cicd-pipelines.md
- study/03-procfile.md
- study/08-environment-variables.md
- study/07-load-balancing-autoscaling.md
- study/00-phase3-learning-summary.md
- study/06-monitoring-observability.md
- study/alembic-migrations-guide.md
- study/fastapi-guide.md
- better-call-buffet-postman-collection.json
- user-domain-implementation.md
- phase4-planning.md
- phase3-completion-checklist.md
- 00-phase3-learning-summary.md
- phase1-implementation.md
- phase2-planning.md
- .what-is-this.md
- 2025-02-23_16-40-building-a-python-rest-api-for-finance-app.md
- 2025-04-15_12-05-brainstorming-personal-finance-api-development.md
- 2025-04-05_17-31-project-setup-assistance.md
- 2025-04-20_21-09-aws-deployment-and-github-actions-help.md
- 2025-04-20_21-11-starting-a-coding-conversation.md
- 2025-04-29_14-05-untitled.md
- 2025-04-29_11-05-financial-tracking-and-investment-review.md


## CODING STANDARDS

- Use consistent naming conventions.
- Follow PEP 8 style guide.


## WORKFLOW & RELEASE RULES

- All code must be reviewed before merging.
- Automated testing must be performed before deployment.
- Use feature branches for new features.
- Use GitHub Actions for CI/CD pipelines.
- Deployments to Elastic Beanstalk should use the AWS CLI or the Elastic Beanstalk Console.
- Always rotate database credentials after exposure.


## DEBUGGING

- Use logging for debugging purposes.
- Utilize CloudWatch for real-time log monitoring in AWS Elastic Beanstalk.
- For local development, use `poetry run uvicorn app.main:app --reload --port 8001`.
- Ensure the `logs` directory exists and has write permissions.


## DATABASE RULES

- Database seeding must be performed before testing.
- Access the database via a UI like DBeaver using the provided credentials.
- Use a `.env` file for local database credentials.
- Use environment variables for production database credentials.


## DEPLOYMENT RULES

- Deployments to AWS Elastic Beanstalk must use the AWS CLI directly.
- Use `AWS_ACCESS_KEY_ID`, `AWS_SECRET_ACCESS_KEY`, and `AWS_REGION` secrets in GitHub Actions.
- Always use a unique version label for each deployment.
- Use a dedicated IAM user for Elastic Beanstalk deployments.
- Add the `AWSElasticBeanstalkFullAccess` and `AWSElasticBeanstalkRoleCWL` managed policies to the deployment IAM user.
- Use the `--process` flag in `aws elasticbeanstalk create-application-version`.
- Add a `sleep` command to allow for AWS eventual consistency.

## DOMAIN RULES (@investments and @accounts)

- Implement an `InvestmentBalancePoint` model to track historical investment balances.  This model should include `investment_id`, `date`, `balance`, and `movement` fields.
- Add API endpoints for creating and querying `InvestmentBalancePoint` data.
- Implement functionality to automatically calculate differences in balance (DIFF).
- Establish a clear relationship between `Investment` and `Account` models.  Consider the possibility that some accounts may be investment accounts.